% if not Unicode TeX skip this customisation
\ifx\Umathchar\undefined
  \expandafter\endinput
\fi

% defaults
\long\def\rmdefault{cmr}
\long\def\sfdefault{cmss}
\long\def\ttdefault{cmtt}


% additional subst
\DeclareFontFamily{TU}{cmr}{}
\DeclareFontShape{TU}{cmr}{m}{n} {<->sub * lmr/m/n}{}

\let\TEST@defaultsubs\@defaultsubs
\let\TEST@lde\LastDeclaredEncoding
\input {omlenc.def}
\input  {t1enc.def}
\input {ot1enc.def}
\input {omsenc.def}
\let\@defaultsubs\TEST@defaultsubs

\let\LastDeclaredEncoding\TEST@lde


\def\TU@test{TU}
\edef\TU@testb{\f@encoding}
\edef\TU@testc{\encodingdefault}

% remove TU from the list checked at begin document
{
\toks@{}
\def\cdp@elt#1#2#3#4{%
\def\@tempb{#1}%
\ifx\@tempb\TU@test\else
\toks@\expandafter{\the\toks@\cdp@elt{#1}{#2}{#3}{#4}}%
\fi}
\cdp@list
\xdef\cdp@list{\the\toks@}
}

% If the current or default encodings are TU set them to OT1
\ifx\TU@test\TU@testb
  \def\f@encoding{OT1}
\fi
\ifx\TU@test\TU@testc
  \long\def\encodingdefault{OT1}
\fi


% if a font has already been selected select the new \normalfont
\expandafter\ifx\the\font\nullfont
\else
  \normalfont
\fi
